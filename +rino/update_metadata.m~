function [ output_args ] = update_metadata(ID, metadata )
%UNTITLED Summary of this function goes here
%   Detailed explanation goes here

    %Check inputs
    checkID(ID);
    checkmetadata(metadata);

    %Get APIToken
    APIToken = rino.authentication;
    
    %JSONify metadata_struct
    metadatajson = rino.savejson('', rino.catstruct(metadata, struct('id', ID)), struct('Compact', 1));
    
    
    headers = [rino.http_createHeader('Authorization',APIToken), rino.http_createHeader('Content-Type','application/json')];



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Checking inputs
    function TF = checkID(x)
        TF = false;
        if isstr(x) || isnumeric(x)
            if isstr(x)
               if length(str2num(x))<1
                   error('File must be specified by its object ID - the object ID is a number, not a file name.')
               end
            end
            TF = true;
        else
            error('File should be specified and the object ID of the parent folder. This can be specified as a string or a number.');
        end
    end

    function TF = checkmetadata(x)
        TF = false;
        if isstruct(x)
            TF = true;
        else
            error('The metadata should be passed to the update_metadata function as a structure array. See http://uk.mathworks.com/help/matlab/ref/struct.html for information of how to create structure arrays.');
        end
    end

end

